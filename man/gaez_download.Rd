% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/download.R
\name{gaez_download}
\alias{gaez_download}
\title{GAEZ v4 Downloader}
\usage{
gaez_download(
  cropcode,
  variable = "yl",
  input = "H",
  irrigation = "r",
  co2 = "0",
  scenario = c("CRUTS32", "Hist", "8110"),
  dir = ".",
  res = "res05/"
)
}
\arguments{
\item{cropcode}{string one \code{code} from \code{data(crops)}}

\item{variable}{string variable name}

\item{input}{string \code{"H"} or \code{"L"}}

\item{irrigation}{string code from \code{\link[=irrigation]{irrigation()}}}

\item{co2}{string \code{"0"} or \code{"1"}}

\item{scenario}{vector of string with 3 elements: Climate Model, Climate Scenario, Time period.}

\item{dir}{path to folder where GAEZ data will be stored. Default \code{.}}

\item{res}{string indicating the GAEZ theme (e.g. \code{"05"} corresponds to \href{https://data.apps.fao.org/map/catalog/srv/eng/catalog.search#/metadata/d4ab84c5-4157-47c4-a544-a2e6244e29bb}{Theme 4, Suitability and Attainable Yield})}
}
\description{
GAEZ v4 data is available via an online Image Service server. Querying a certain
URL, properly composed, serves a raster image to the user for download. The corresponding base URLs are available in the first table of the \href{https://gaez-data-portal-hqfao.hub.arcgis.com/pages/data-access-download}{Data Access page of GAEZ}.
}
\details{
This function composes a URL string and sends the query to the server. For example, one can download GAEZ data for a certain \href{https://gaez.fao.org/pages/modules}{GAEZ theme}, a given crop, input and irrigation settings for a certain scenario into a corresponding folder on disk.
The simplest way to compose an URL is to use the \href{https://gaez-data-portal-hqfao.hub.arcgis.com/pages/data-viewer}{GAEZ data viewer}, following the steps below. The viewer looks like this:
\figure{GAEZ-viewer.png}{GAEZ v4 Data Viewer}
\enumerate{
\item choose appropriate theme on top
\item Choose a variable (if known-else leave blank for default choice): not all variables are available in all combinations
\item Choose Time period (or leave blank)
\item Choose Climate Model. available via \code{\link[=climate_models]{climate_models()}}
\item Choose RCP scenario (only if making extrapolation to the future): available via \code{\link[=rcps]{rcps()}}
\item Choose a crop. via \code{data(crops)}
\item Choose Water Supply. codes in \code{\link[=irrigation]{irrigation()}}
\item Choose an input level (high or low)
\item Choose with or without CO2 fertilizer
}

The image on the right of the dropdown menus is your current raster, which can be downloaded. You will notice that not all data is available in all parts of the world.
}
\section{How To Get the URL String}{

In the data viewer, zoom into a region of interest and click on an arbitrary pixel, as illustrated here:
\figure{GAEZ-select.png}{GAEZ v4 Pixel Selector}
In the appearing popup menu, right click on link \emph{download this raster}. It will have a form like \verb{https://s3.eu-west-1.amazonaws.com/data.gaezdev.aws.fao.org/res05/CRUTS32/Hist/6190H/ycHr0_whe.tif}, which composes as follows:
\itemize{
\item Base url: \verb{https://s3.eu-west-1.amazonaws.com/data.gaezdev.aws.fao.org}
\item GAEZ theme: \code{res05}
\item Climate Model: \code{CRUTS32}
\item Climate Scenario: \emph{Hist} for past, one of several \emph{RCP} scenarios for future.
\item Time Period: \verb{6190H} stands for 1961 thru 1990 \emph{Historical}
\item The Variable name: \code{ycHr0_whe.tif}
\itemize{
\item \code{yc} stands for \emph{Average attainable yield of current cropland}. Other values in Theme 4 are for example \code{yl} (\emph{Output Density (potential production divided by total grid cell area})) or \code{yx} (\emph{Average attainable yield of best occurring suitability class in grid cell})
\item \code{H} is the choice of input level (High or Low)
\item \code{r} whether rainfed (see \code{\link[=irrigation]{irrigation()}})
\item \code{0} whether there is CO2 fertilization.
\item \code{whe} is the crop code from \code{data(crops)}.
}
}

Christophe Gouel wrote the core of this function. Florian Oswald rearranged and wrote the supporting documentation.
}

